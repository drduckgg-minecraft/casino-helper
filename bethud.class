package com.lakutils.gui;

import com.lakutils.LakUtils;
import com.lakutils.model.Bet;
import net.minecraft.class_310;
import net.minecraft.class_332;

import java.util.List;

public class BetHud {

    private static BetHud INSTANCE;

    public static BetHud getInstance() {
        if (INSTANCE == null) INSTANCE = new BetHud();
        return INSTANCE;
    }

    public void render(class_332 ctx, int mouseX, int mouseY) {
        if (!LakUtils.betManager.isEnabled()) return;

        class_310 mc = LakUtils.mc;
        float scale = LakUtils.config.guiScale;

        ctx.method_51448().method_22903();
        ctx.method_51448().method_22905(scale, scale, 1f);

        int x = (int) (LakUtils.config.guiX / scale);
        int y = (int) (LakUtils.config.guiY / scale);

        int width = 310;
        int height = 110;

        // ---------- Background (dark translucent) ----------
        int bg = 0xAA000000;
        ctx.method_25294(x, y, x + width, y + height, bg);

        // ---------- Bright green border ----------
        int border = 0x00FF00;
        int thick = 2;

        // top
        ctx.method_25294(x, y, x + width, y + thick, border);
        // bottom
        ctx.method_25294(x, y + height - thick, x + width, y + height, border);
        // left
        ctx.method_25294(x, y, x + thick, y + height, border);
        // right
        ctx.method_25294(x + width - thick, y, x + width, y + height, border);

        // ---------- Title ----------
        ctx.method_25303(mc.field_1772,
                "Lak's Casino Helper",
                x + 8, y + 8,
                0xFF42A5FF);   // neon pink/purple

        // ---------- Min/Max ----------
        ctx.method_25303(mc.field_1772,
                "Min " + LakUtils.config.minBet + " | Max " + LakUtils.config.maxBet,
                x + 8, y + 26,
                0x00FF00);

        // ---------- Username ----------
        ctx.method_25303(mc.field_1772,
                "Username: " + LakUtils.config.username,
                x + 8, y + 42,
                0x00CCFF);

        // ---------- Golden Top Roller Bar ----------
        String hr = LakUtils.betManager.getHighestRoller();
        if (!hr.isEmpty()) {
            long amt = LakUtils.betManager.getHighestRollerAmount();
            String text = "Top Total Wagered: " + hr + " (" + Bet.formatMoney(amt) + ")";

            // Gold bar background
            int barY = y + 62;
            int barHeight = 20;
            int gold = 0xFFCCAA33;
            ctx.method_25294(x + 6, barY, x + width - 6, barY + barHeight, gold);

            // Text centered vertically
            ctx.method_25303(mc.field_1772,
                    text,
                    x + 12, barY + 6,
                    0xFFFFEE88);
        }

        ctx.method_51448().method_22909();
    }
}
